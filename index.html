<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1" />
  <title>Feliz Anivers√°rio, M√°rcia ‚ù§Ô∏è</title>

  <style>
    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      -webkit-tap-highlight-color: transparent;
    }
    html,body{height:100%}
    body{
      height:100vh;
      background:#050505;
      color:#f2f2f2;
      font-family:'Courier New', monospace;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      overflow:hidden;
      transition:opacity 1.5s ease-in-out;
      -webkit-text-size-adjust:100%;
      position:relative;
    }

    /* Part√≠culas douradas de fundo */
    #particles{
      position:fixed;
      inset:0;
      overflow:hidden;
      pointer-events:none;
      z-index:0;
    }
    .particle{
      position:absolute;
      width:3px;
      height:3px;
      border-radius:50%;
      background:rgba(214,184,138,0.85);
      opacity:0.0;
      animation: floatUp linear infinite;
      filter:blur(0.4px);
    }
    @keyframes floatUp{
      0%{
        transform:translate3d(0, 100vh, 0);
        opacity:0;
      }
      20%{
        opacity:0.5;
      }
      80%{
        opacity:0.5;
      }
      100%{
        transform:translate3d(0, -20vh, 0);
        opacity:0;
      }
    }

    /* Terminal com efeito CRT digital suave */
    .terminal{
      position:relative;
      width:min(860px,92%);
      max-width:860px;
      padding:28px 32px;
      color:#e6d2b5;
      background:radial-gradient(circle at top, #1a1a1a 0%, #050505 60%, #000 100%);
      border-left:2px solid #d6b88a;
      border-right:2px solid #d6b88a;
      white-space:pre-wrap;
      line-height:1.6;
      min-height:220px;
      min-width:280px;
      margin-bottom:18px;
      font-size:1.05rem;
      word-break:break-word;
      box-shadow:0 0 18px rgba(0,0,0,0.75), 0 0 32px rgba(214,184,138,0.16);
      z-index:1;
      overflow:hidden;
    }

    .terminal::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:linear-gradient(rgba(255,255,255,0.04) 1px, transparent 1px);
      background-size:100% 3px;
      mix-blend-mode:soft-light;
      opacity:0.28;
    }

    .terminal::after{
      content:"";
      position:absolute;
      inset:-20%;
      background:
        radial-gradient(circle at top, rgba(255,255,255,0.17), transparent 55%),
        radial-gradient(circle at bottom, rgba(0,0,0,0.7), transparent 60%);
      mix-blend-mode:soft-light;
      opacity:0.24;
      pointer-events:none;
    }

    /* Cora√ß√£o com pulso + glow */
    .heart{
      font-size:2.6rem;
      color:#ff2d55;
      opacity:0;
      transition:opacity .8s ease-in-out;
      margin-top:10px;
      animation:pulse 1.35s infinite ease-in-out;
      text-shadow:0 0 12px rgba(255,45,85,0.6), 0 0 26px rgba(255,45,85,0.35);
      z-index:1;
    }
    .heart.reveal{opacity:1}

    @keyframes pulse{
      0%  { transform:scale(1);   text-shadow:0 0 6px rgba(255,45,85,0.5), 0 0 18px rgba(255,45,85,0.2); }
      50% { transform:scale(1.32);text-shadow:0 0 18px rgba(255,45,85,0.7), 0 0 34px rgba(255,45,85,0.45);}
      100%{ transform:scale(1);   text-shadow:0 0 6px rgba(255,45,85,0.5), 0 0 18px rgba(255,45,85,0.2); }
    }

    /* FOOTER ‚Äî corrigido para iPhone */
    footer{
      position: fixed;
      bottom: env(safe-area-inset-bottom);
      width:100%;
      text-align:center;
      color:#666;
      font-size:.85rem;
      padding: 8px 0 calc(env(safe-area-inset-bottom) + 4px);
      z-index:999;
      pointer-events:none;
    }

    /* Tela inicial */
    #start-screen{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:radial-gradient(circle at top, rgba(0,0,0,0.8), rgba(0,0,0,0.96));
      z-index:40;
      transition:opacity .5s ease-in-out;
      flex-direction:column;
      gap:10px;
      color:#e6d2b5;
      text-align:center;
      padding:20px;
    }
    #start-screen p{font-size:1.05rem}
    #start-screen button{
      background:#d6b88a;
      color:#111;
      border:none;
      padding:12px 28px;
      border-radius:30px;
      cursor:pointer;
      font-family:'Courier New',monospace;
      font-size:1rem;
      transition:transform .2s ease, background .2s ease, box-shadow .2s ease;
      box-shadow:0 0 12px rgba(214,184,138,0.3);
      margin-top:6px;
    }
    #start-screen button:hover{
      transform:scale(1.04);
      background:#e6d2b5;
      box-shadow:0 0 20px rgba(214,184,138,0.45);
    }

    /* Log pr√©-autentica√ß√£o */
    #boot-log{
      margin-top:16px;
      font-size:.9rem;
      color:#b9b9b9;
      white-space:pre-wrap;
      min-height:54px;
      max-width:360px;
    }

    /* Modal senha */
    #authModal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index:80;
      background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.78));
      padding:20px;
    }
    .authBox{
      background:#0f0f0f;
      border:1px solid #2a2a2a;
      padding:22px;
      width:min(460px,92%);
      color:#e6d2b5;
      border-radius:12px;
      box-shadow:0 8px 32px rgba(0,0,0,0.75);
      text-align:left;
    }
    .authRow{display:flex;gap:8px;align-items:center;margin-top:12px}
    .authRow input{
      flex:1;
      padding:12px;
      border-radius:8px;
      border:1px solid #333;
      background:#0e0e0e;
      color:#f2f2f2;
      font-family:'Courier New',monospace;
      font-size:1rem;
    }
    .authRow button{
      padding:12px 16px;
      border-radius:8px;
      border:none;
      background:#d6b88a;
      color:#111;
      cursor:pointer;
      font-size:1rem;
    }
    .authMsg{
      margin-top:10px;
      min-height:22px;
      font-size:.95rem;
    }
    .countdown{
      margin-top:8px;
      color:#cfcfcf;
      font-size:.9rem;
    }

    /* Dica animada */
    .fade-in{
      opacity:0;
      animation:fadeIn 1s forwards ease-in-out;
    }
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(5px);}
      to  {opacity:1;transform:translateY(0);}
    }

    @media (max-width:600px){
      .terminal{padding:16px;font-size:.95rem}
      .heart{font-size:2.3rem}
      #start-screen p{font-size:.95rem}
      .authBox{padding:18px}
      .authRow input{padding:10px}
      .authRow button{padding:10px 14px}
    }
  </style>
</head>

<body>

  <!-- Part√≠culas -->
  <div id="particles"></div>

  <!-- TELA INICIAL -->
  <div id="start-screen">
    <p>Clique para iniciar a surpresa üéß</p>
    <button id="openAuth">Iniciar üí´</button>
    <small style="color:#888;margin-top:4px">Voc√™ ter√° que digitar uma senha para liberar o presente</small>
    <div id="boot-log"></div>
  </div>

  <!-- MODAL SENHA -->
  <div id="authModal" aria-hidden="true">
    <div class="authBox" role="dialog" aria-modal="true">

      <div style="font-weight:600;font-size:1.05rem">Autentica√ß√£o necess√°ria</div>
      <div style="margin-top:8px;color:#bdbdbd">Digite a senha para liberar a surpresa.</div>

      <div class="authRow">
        <input id="passwordInput" type="password" placeholder="Senha" autocomplete="off" />
        <button id="submitPass">Liberar</button>
      </div>

      <div class="authMsg" id="authMsg"></div>
      <div class="countdown" id="countdown"></div>

      <div id="passwordHint"
           style="margin-top:12px;color:#999;font-size:.9rem;display:none">
        Dica: Cinco letras que t√™m o poder de transformar o dia de algu√©m.  
        E combinam perfeitamente com o seu ‚Äúnovo sobrenome‚Äù. üòâ
      </div>
    </div>
  </div>

  <!-- CONTE√öDO PRINCIPAL -->
  <div class="terminal" id="terminal"></div>
  <div class="heart" id="heart">‚ù§Ô∏è</div>

  <footer>¬© 2025 ‚Äî Criado com ‚ù§Ô∏è por um Dev que admira voc√™</footer>


<script>
/* ================================
      CONFIGURA√á√ïES
================================ */
const RELEASE_DATE = new Date(2025, 10, 15, 0, 0, 0); // 13/11/2025
const SECRET = "smile";
const MUSIC_FILE = "music.mp3";

let music = new Audio(MUSIC_FILE);
music.preload = 'auto';
music.loop = false;
music.volume = 0.5;

const DURATION = 150;
const FADE_IN_TIME = 5;
const FADE_OUT_TIME = 10;

/* ELEMENTOS */
const startScreen = document.getElementById('start-screen');
const openAuth = document.getElementById('openAuth');
const authModal = document.getElementById('authModal');
const passwordInput = document.getElementById('passwordInput');
const submitPass = document.getElementById('submitPass');
const authMsg = document.getElementById('authMsg');
const countdownEl = document.getElementById('countdown');
const terminal = document.getElementById('terminal');
const heart = document.getElementById('heart');
const bootLog = document.getElementById('boot-log');

let activeDots = {};
let currentLine = -1;
let timelineIndex = 0;
let pollTimer = null;

/* TIMELINE PRINCIPAL */
const TIMELINE = [
  { at: 0,  action: () => showDots("Inicializando sistema") },
  { at: 12, action: () => showDots("Carregando lembran√ßas") },
  { at: 28, action: () => showDots("Compilando sorrisos") },
  { at: 40, action: () => showDots("Renderizando carinho") },
  { at: 52, action: () => showDots("Executando surpresa") },
  { at: 64, action: () => {
      stopAllDots();
      typeLine("Output: Feliz anivers√°rio, M√°rcia üåπ");
    }
  },
  { at: 76, action: () =>
      typeLine("Voc√™ √© a exce√ß√£o mais linda da minha l√≥gica ‚ù§Ô∏è", 95, () => {
        heart.classList.add("reveal");
      })
  },
  { at: DURATION - FADE_OUT_TIME, action: () => fadeOutMusicAndEndMessage() }
];

/* TERMINAL FUN√á√ïES */
function newLine(text=""){
  currentLine++;
  const lines = terminal.textContent.split("\n");
  lines[currentLine] = text;
  terminal.textContent = lines.join("\n");
  if (!terminal.textContent.endsWith("\n")) terminal.textContent += "\n";
  return currentLine;
}

function showDots(baseText){
  const id = newLine(baseText);
  let dots = 0;
  activeDots[id] = setInterval(()=>{
    dots = (dots + 1) % 4;
    const lines = terminal.textContent.split("\n");
    lines[id] = baseText + '.'.repeat(dots);
    terminal.textContent = lines.join("\n");
  }, 500);
}

function stopAllDots(){
  for(const id in activeDots) clearInterval(activeDots[id]);
  activeDots = {};
}

function typeLine(text, speed=100, after=()=>{}){
  const id = newLine("");
  let i = 0;
  const iv = setInterval(()=>{
    if (i < text.length){
      const lines = terminal.textContent.split("\n");
      lines[id] = text.substring(0, i+1);
      terminal.textContent = lines.join("\n");
      i++;
    } else {
      clearInterval(iv);
      after();
    }
  }, speed);
}

/* √ÅUDIO */
function fadeInMusic(){
  const step = 0.01;
  const iv = setInterval(()=>{
    if (music.volume < 1){
      music.volume = Math.min(music.volume + step, 1);
    } else clearInterval(iv);
  }, FADE_IN_TIME * 20);
}

/* Mensagem final + fade-out + restart */
function fadeOutMusicAndEndMessage(){
  const step = 0.02;
  const iv = setInterval(()=>{
    if (music.volume > 0.02){
      music.volume = Math.max(music.volume - step, 0);
    } else {
      clearInterval(iv);
      music.pause();
      // mensagem final surpresa
      typeLine("> Kernel report: sorriso detectado ‚Äî pico m√°ximo de luz registrado. E que privil√©gio √© ver voc√™ sorrir. üòÑ", 70, () => {
        setTimeout(()=>smoothRestart(), 2200);
      });
    }
  }, FADE_OUT_TIME * 20);
}

/* REIN√çCIO */
function smoothRestart(){
  document.body.style.opacity = "0";
  setTimeout(()=>{
    terminal.textContent = "";
    heart.classList.remove("reveal");
    music = new Audio(MUSIC_FILE);
    music.volume = 0.5;
    currentLine = -1;
    timelineIndex = 0;
    startScreen.style.display = "flex";
    startScreen.style.opacity = "1";
    document.body.style.opacity = "1";
    bootLog.textContent = "";
  }, 2200);
}

/* TIMELINE EXECU√á√ÉO */
function startTimeline(){
  terminal.textContent = "";
  currentLine = -1;
  timelineIndex = 0;
  music.currentTime = 0;

  music.play().then(()=>{
    fadeInMusic();

    pollTimer = setInterval(()=>{
      const t = music.currentTime;
      while (timelineIndex < TIMELINE.length && t >= TIMELINE[timelineIndex].at){
        TIMELINE[timelineIndex].action();
        timelineIndex++;
      }
      if (timelineIndex >= TIMELINE.length) clearInterval(pollTimer);
    }, 100);

  }).catch(err=>{
    console.warn("Erro no √°udio:", err);
    alert("Clique novamente para liberar o √°udio.");
    openAuthModal();
  });
}

/* LIBERA√á√ÉO POR DATA */
function nowIsReleased(){
  return new Date() >= RELEASE_DATE;
}

function msToTimeParts(ms){
  const s = Math.max(0, Math.floor(ms/1000));
  const d = Math.floor(s / 86400);
  const h = Math.floor((s % 86400) / 3600);
  const m = Math.floor((s % 3600) / 60);
  const sec = s % 60;
  return {d,h,m,sec};
}

let countdownInterval = null;
function startCountdown(){
  if (countdownInterval) clearInterval(countdownInterval);
  function tick(){
    const diff = RELEASE_DATE - new Date();
    if (diff <= 0){
      countdownEl.textContent = "O sistema j√° pode ser liberado hoje. Digite a senha.";
      clearInterval(countdownInterval);
      return;
    }
    const p = msToTimeParts(diff);
    countdownEl.textContent = `Faltam ${p.d}d ${p.h}h ${p.m}m ${p.sec}s para libera√ß√£o.`;
  }
  tick();
  countdownInterval = setInterval(tick, 1000);
}

/* MODAL */
function openAuthModal(){
  authModal.style.display = "flex";
  passwordInput.value = "";
  authMsg.textContent = "";
  countdownEl.textContent = "";
  if (!nowIsReleased()) startCountdown();
  passwordInput.focus();
}
function closeAuthModal(){ authModal.style.display="none"; }

/* BOOT PR√â-AUTENTICA√á√ÉO */
function startPreAuthBoot(){
  openAuth.disabled = true;
  bootLog.textContent = "";

  const lines = [
    "> carregando m√≥dulo de acesso...",
    "> iniciando autentica√ß√£o segura...",
    "> preparando ambiente..."
  ];

  let idxLine = 0;
  function typeNext(){
    if (idxLine >= lines.length){
      setTimeout(()=>{
        openAuthModal();
        openAuth.disabled = false;
      }, 400);
      return;
    }
    let i = 0;
    const line = lines[idxLine];
    if (idxLine === 0) bootLog.textContent = "";
    bootLog.textContent += (idxLine > 0 ? "\n" : "");
    const iv = setInterval(()=>{
      if (i <= line.length){
        const txt = bootLog.textContent.split("\n");
        txt[idxLine] = line.substring(0, i);
        bootLog.textContent = txt.join("\n");
        i++;
      } else {
        clearInterval(iv);
        idxLine++;
        setTimeout(typeNext, 300);
      }
    }, 40);
  }
  typeNext();
}

/* SENHA */
function handleAuthSubmit(){
  const typed = (passwordInput.value || "").trim();

  if (!nowIsReleased()){
    authMsg.style.color = "#f4a7a7";
    authMsg.textContent = "Acesso negado. O sistema s√≥ ser√° liberado na data marcada.";
    if (!countdownInterval) startCountdown();
    return;
  }

  if (typed === SECRET){
    authMsg.style.color = "#b7f4c9";
    authMsg.textContent = "Senha correta ‚Äî iniciando a surpresa...";
    document.getElementById("passwordHint").style.display = "none";

    setTimeout(()=>{
      closeAuthModal();
      startScreen.style.opacity = "0";
      setTimeout(()=>{
        startScreen.style.display = "none";
        startTimeline();
      }, 450);
    }, 450);

  } else {
    authMsg.style.color = "#f4a7a7";
    authMsg.textContent = "Senha incorreta. Tente novamente.";
    passwordInput.focus();

    const hint = document.getElementById("passwordHint");
    if (hint.style.display === "none" || !hint.style.display){
      hint.style.display = "block";
      hint.classList.add("fade-in");
    }
  }
}

/* PART√çCULAS */
function initParticles(){
  const container = document.getElementById('particles');
  const count = 30;
  for (let i=0;i<count;i++){
    const p = document.createElement('span');
    p.className = 'particle';
    const left = Math.random()*100;
    const delay = Math.random()*18;
    const duration = 14 + Math.random()*10;
    p.style.left = left + '%';
    p.style.animationDuration = duration + 's';
    p.style.animationDelay = delay + 's';
    container.appendChild(p);
  }
}

/* EVENTOS */
openAuth.addEventListener('click', startPreAuthBoot);
submitPass.addEventListener('click', handleAuthSubmit);
passwordInput.addEventListener('keydown', e => { if (e.key === "Enter") handleAuthSubmit(); });
authModal.addEventListener('click', e => { if (e.target === authModal) closeAuthModal(); });

/* INIT */
initParticles();

</script>

</body>
</html>
