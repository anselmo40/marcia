<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feliz Anivers√°rio, M√°rcia üí´</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      background: #0e0e0e;
      color: #f2f2f2;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: left;
      overflow: hidden;
      transition: opacity 2s ease-in-out;
    }

    .terminal {
      background: transparent;
      color: #e6d2b5;
      font-size: 1.2rem;
      padding: 25px 40px;
      border-left: 2px solid #d6b88a;
      white-space: pre;
      line-height: 1.6;
      min-width: 320px;
      max-width: 600px;
      border-right: 2px solid #d6b88a;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    .heart {
      font-size: 2rem;
      margin-top: 25px;
      color: #ff2d55;
      opacity: 0;
      animation: pulse 1.5s infinite ease-in-out;
      transition: opacity 1s ease-in-out;
    }

    .reveal {
      opacity: 1 !important;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    footer {
      position: absolute;
      bottom: 12px;
      font-size: 0.85rem;
      color: #666;
    }

    #start-screen {
      position: fixed;
      inset: 0;
      background: #0e0e0e;
      color: #e6d2b5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Courier New', monospace;
      text-align: center;
      z-index: 10;
      transition: opacity 1s ease-in-out;
    }

    #start-screen button {
      background: #d6b88a;
      color: #111;
      border: none;
      padding: 10px 25px;
      border-radius: 25px;
      font-family: 'Courier New', monospace;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }

    #start-screen button:hover {
      background: #e6d2b5;
      transform: scale(1.05);
    }

    @media (max-width: 600px) {
      .terminal {
        font-size: 1rem;
        padding: 20px;
      }
    }
  </style>
</head>
<body>

  <div id="start-screen">
    <p style="margin-bottom:15px;">Clique para iniciar a surpresa üéß</p>
    <button id="play">Iniciar üí´</button>
  </div>

  <div class="terminal" id="terminal"></div>
  <div class="heart" id="heart">‚ù§Ô∏è</div>

  <footer>¬© 2025 ‚Äî Criado com ‚ù§Ô∏è por um Dev que admira voc√™</footer>

   <script>
/* ========= elementos ========= */
const terminal = document.getElementById('terminal');
const heart = document.getElementById('heart');
const playButton = document.getElementById('play');
const startScreen = document.getElementById('start-screen');

/* ========= audio ========= */
let music = new Audio('music.mp3');
music.preload = 'auto';
music.loop = false;
music.volume = 0.5;                 // come√ßa em 50%

/* ========= config ========= */
const DURATION = 150;               // m√∫sica ~2:30
const FADE_IN_TIME = 5;             // s
const FADE_OUT_TIME = 10;           // s finais

/* Linha com pontinhos ‚Äú...‚Äù piscando */
let dotsTimer = null;
function showDots(baseText) {
  stopDots();
  // escreve baseText na √∫ltima linha e anima pontos
  let dots = 0;
  // garante que a √∫ltima linha √© essa
  const lines = terminal.textContent.split('\n');
  if (lines[lines.length - 1] !== baseText) {
    terminal.textContent += (terminal.textContent.endsWith('\n') ? '' : '\n');
    terminal.textContent += baseText;
  }
  dotsTimer = setInterval(() => {
    dots = (dots + 1) % 4;
    const arr = terminal.textContent.split('\n');
    arr[arr.length - 1] = baseText + '.'.repeat(dots);
    terminal.textContent = arr.join('\n');
  }, 500);
}
function stopDots() {
  if (dotsTimer) {
    clearInterval(dotsTimer);
    dotsTimer = null;
  }
}

/* Digita uma linha ‚Äúdevagar‚Äù e quebra linha no fim */
function typeLine(text, speed = 100, after = () => {}) {
  stopDots();
  let i = 0;
  const tick = setInterval(() => {
    if (i < text.length) {
      terminal.textContent += text[i++];
    } else {
      clearInterval(tick);
      terminal.textContent += '\n';
      after();
    }
  }, speed);
}

/* Fade do √°udio */
function fadeInMusic() {
  const step = 0.01;                        // granula√ß√£o do fade
  const iv = setInterval(() => {
    if (music.volume < 1) music.volume = Math.min(music.volume + step, 1);
    else clearInterval(iv);
  }, FADE_IN_TIME * 20);
}
function fadeOutMusicAndRestart() {
  const step = 0.02;
  const iv = setInterval(() => {
    if (music.volume > 0.02) music.volume = Math.max(music.volume - step, 0);
    else {
      clearInterval(iv);
      music.pause();
      smoothRestart();
    }
  }, FADE_OUT_TIME * 20);
}

/* Volta para a tela inicial suavemente */
function smoothRestart() {
  document.body.style.opacity = "0";
  setTimeout(() => {
    // reset visual
    terminal.textContent = "";
    heart.classList.remove('reveal');
    // recria o √°udio p/ evitar bug de segundo play
    music = new Audio('music.mp3');
    music.preload = 'auto';
    music.loop = false;
    music.volume = 0.5;
    startScreen.style.display = "flex";
    document.body.style.opacity = "1";
  }, 2000);
}

/* ========= timeline sincronizada pela m√∫sica =========
   - TUDO mede o time por music.currentTime
   - M√∫sica come√ßa no clique (t=0)
   - 28s: entra ‚ÄúCompilando sorrisos‚Ä¶‚Äù com pontinhos
   - Mant√©m pontinhos at√© ‚ÄúExecutando surpresa‚Ä¶‚Äù
*/
const TIMELINE = [
  // t=0  ‚Üí j√° inicia com ‚ÄúInicializando sistema ...‚Äù (pontinhos)
  { at: 0,   action: () => showDots("Inicializando sistema") },

  // t=12 ‚Üí digita ‚ÄúCarregando lembran√ßas...‚Äù
  { at: 12,  action: () => typeLine("Carregando lembran√ßas...", 100) },

  // t=28 ‚Üí come√ßa ‚ÄúCompilando sorrisos‚Äù com pontinhos (voz entra)
  { at: 28,  action: () => showDots("Compilando sorrisos") },

  // t=40 ‚Üí troca para ‚ÄúRenderizando carinho‚Äù com pontinhos
  { at: 40,  action: () => showDots("Renderizando carinho") },

  // t=52 ‚Üí troca para ‚ÄúExecutando surpresa‚Äù com pontinhos
  { at: 52,  action: () => showDots("Executando surpresa") },

  // t=64 ‚Üí para pontinhos e digita ‚ÄúOutput: ...‚Äù
  { at: 64,  action: () => typeLine("Output: Feliz anivers√°rio, M√°rcia üí´", 100) },

  // t=76 ‚Üí digita a frase final e mostra cora√ß√£o
  { at: 76,  action: () => typeLine("Voc√™ √© a exce√ß√£o mais linda da minha l√≥gica ‚ù§Ô∏è", 100, () => {
      heart.classList.add('reveal');
    })
  },

  // t= DURATION-FADE_OUT_TIME ‚Üí come√ßa fade-out e depois reinicia
  { at: (DURATION - FADE_OUT_TIME), action: () => fadeOutMusicAndRestart() }
];

let timelineIndex = 0;
let pollTimer = null;

function startTimeline() {
  // zera estado
  timelineIndex = 0;
  terminal.textContent = "";

  // come√ßa a tocar a m√∫sica no clique (t=0)
  music.currentTime = 0;
  music.play().then(() => {
    fadeInMusic();

    // polling leve para disparar eventos na hora certa
    pollTimer = setInterval(() => {
      const t = music.currentTime;
      while (timelineIndex < TIMELINE.length && t >= TIMELINE[timelineIndex].at) {
        TIMELINE[timelineIndex].action();
        timelineIndex++;
      }
      // seguran√ßa: se passou do fim, para o polling
      if (timelineIndex >= TIMELINE.length) {
        clearInterval(pollTimer);
      }
    }, 100); // checa a cada 100ms
  }).catch(err => {
    console.warn("Audio play bloqueado:", err);
  });
}

/* ========= clique do bot√£o ========= */
playButton.addEventListener('click', () => {
  // some a tela inicial
  startScreen.style.opacity = "0";
  setTimeout(() => {
    startScreen.style.display = "none";
    startTimeline();
  }, 400);
});
</script>




</body>
</html>
